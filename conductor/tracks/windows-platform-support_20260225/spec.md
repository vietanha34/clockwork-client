# Specification: Windows Platform Support

**Track ID:** windows-platform-support_20260225
**Type:** Feature
**Created:** 2026-02-25
**Status:** Draft

## Summary

Add Windows-specific handling for window positioning (popover above taskbar), tray icon (static icon + tooltip instead of bitmap), and popover visual style (Windows-native appearance without arrow).

## Context

Clockwork Menubar is a cross-platform system tray app (macOS, Windows, Linux). Current implementation is macOS-centric: popover drops below the menu bar, tray icon uses canvas-drawn bitmap text, and CSS arrow points upward. On Windows where the taskbar is at the bottom, the popover gets cut off and the tray icon is too small for bitmap text.

## User Story

As a Windows user, I want the Clockwork menubar app to display correctly on Windows so that the popover appears above the taskbar, the tray icon shows useful timer info via tooltip, and the window looks native to Windows.

## Acceptance Criteria

- [ ] On Windows, clicking tray icon shows popover **above** the tray icon (not below)
- [ ] On Windows, tray icon remains static (no bitmap update), tooltip shows `"ISSUE-KEY: HH:MM:SS"`
- [ ] On Windows, popover has 8px border-radius, no CSS arrow, Windows-appropriate shadow
- [ ] On macOS/Linux, zero behavior change â€” existing functionality preserved exactly
- [ ] Platform detection happens once on app mount via `@tauri-apps/plugin-os`

## Dependencies

- `@tauri-apps/plugin-os` npm package (new dependency)
- Corresponding Tauri OS plugin Rust crate (if not already bundled)

## Out of Scope

- Taskbar positions other than bottom (top/left/right on Windows)
- Ubuntu/Linux-specific styling or behavior changes
- Windows installer or distribution packaging
- Tray context menu differences between platforms

## Technical Notes

- Design doc: [docs/plans/2026-02-25-windows-platform-support-design.md](../../../docs/plans/2026-02-25-windows-platform-support-design.md)
- Window dimensions (302x540) should be extracted as constants in `lib.rs`
- Use `#[cfg(target_os = "windows")]` for Rust compile-time branching
- Use CSS class `platform-windows` on `<html>` for frontend style branching

---

_Generated by Conductor. Review and edit as needed._
