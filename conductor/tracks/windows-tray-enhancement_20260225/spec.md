# Specification: Windows Tray Icon Enhancement

**Track ID:** windows-tray-enhancement_20260225
**Type:** Feature
**Created:** 2026-02-25
**Status:** Draft

## Summary

Improve the Windows tray icon experience with dynamic active/idle icons, a daily progress bar in MainView, and a settings guide for pinning the icon to the taskbar.

## Context

On macOS, the tray icon dynamically renders timer text and a progress bar via canvas bitmap. Windows tray icons are too small for this approach — currently only a tooltip is used. This track adds Windows-specific alternatives to convey the same information.

## User Story

As a Windows user, I want to see at a glance whether a timer is running (via tray icon color), my daily progress (via in-app progress bar), and know how to keep the icon always visible on the taskbar.

## Acceptance Criteria

- [ ] Tray icon changes between idle (grey) and active (colored) state when timer starts/stops on Windows
- [ ] macOS tray icon behavior unchanged (still uses canvas bitmap)
- [ ] Daily progress bar (logged/8h) displayed at top of MainView on Windows only
- [ ] Settings view shows dismissible info banner on Windows explaining how to pin the tray icon
- [ ] Dismiss state persisted — banner doesn't reappear after dismissal

## Dependencies

- Existing `@tauri-apps/plugin-os` for platform detection
- Existing `update_tray_tooltip` Rust command
- Two new icon assets (`tray-idle.png`, `tray-active.png`)

## Out of Scope

- Dynamic bitmap rendering on Windows tray icon
- Linux-specific tray behavior
- Auto-pinning the icon programmatically

## Technical Notes

- Design doc: [docs/plans/2026-02-25-windows-tray-enhancement-design.md](../../../docs/plans/2026-02-25-windows-tray-enhancement-design.md)
- Icon swap via new Rust command `update_tray_icon_state(active: bool)`
- Progress bar reuses `dailyProgress` already computed in App.tsx
- Platform detection via `platform()` from `@tauri-apps/plugin-os`

---

_Generated by Conductor. Review and edit as needed._
