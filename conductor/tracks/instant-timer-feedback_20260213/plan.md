# Implementation Plan: Instant Timer Feedback After Start

**Track ID:** instant-timer-feedback_20260213
**Spec:** [spec.md](./spec.md)
**Created:** 2026-02-13
**Status:** [~] In Progress

## Overview

Two-pronged approach: (1) Server triggers Inngest sync immediately after starting a timer so Redis gets fresh data within seconds. (2) Client temporarily increases polling from 10s to 2s for ~30s after start, picking up the new data faster.

## Phase 1: Server-Side — Trigger Inngest Sync After Start

Fire an Inngest event after `startTimer` succeeds so the cache refreshes immediately.

### Tasks

- [x] Task 1.1: Import Inngest client in `/api/timers/start.ts` and send `clockwork/timers.sync.requested` event after successful `startTimer` call
- [x] Task 1.2: Verify Inngest function processes the event and updates Redis cache

### Verification

- [ ] After starting a timer, Inngest logs show a sync was triggered and Redis cache is updated within seconds

## Phase 2: Client-Side — Fast Polling After Start

Temporarily increase React Query polling frequency after a successful start mutation.

### Tasks

- [ ] Task 2.1: Add a `fastPolling` state (or ref) to `useActiveTimers` that can be toggled externally (e.g., via a callback or shared state)
- [ ] Task 2.2: When `fastPolling` is active, set `refetchInterval` to 2000ms instead of 10000ms, with auto-reset after 30s
- [ ] Task 2.3: In `useStartTimer` `onSuccess`, activate fast polling mode

### Verification

- [ ] After clicking start timer, client polls every 2s and new timer appears within 2-7s
- [ ] Polling returns to 10s after 30s window expires

## Final Verification

- [ ] End-to-end: Start timer → timer appears in UI within 2-7 seconds
- [ ] No regressions in stop timer or active timer display
- [ ] Normal 10s polling resumes after fast-poll window

---

_Generated by Conductor. Tasks will be marked [~] in progress and [x] complete._
