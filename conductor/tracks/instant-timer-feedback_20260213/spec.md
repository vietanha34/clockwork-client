# Specification: Instant Timer Feedback After Start

**Track ID:** instant-timer-feedback_20260213
**Type:** Feature
**Created:** 2026-02-13
**Status:** Draft

## Summary

After starting a timer, trigger an immediate Inngest sync to refresh the Redis cache, and temporarily increase the Tauri client's polling frequency to pick up the new data faster. Expected latency: timer appears in UI within 2-7 seconds.

## Context

The Clockwork Menubar app uses Inngest to periodically sync active timer data from the Clockwork Report API into Redis. The Tauri client polls Redis every 10 seconds. When a user starts a new timer, the cache is stale until the next Inngest cycle runs, causing a delay of up to 60 seconds before the new timer appears in the UI. This creates a poor feedback loop â€” users don't know if the timer actually started.

## User Story

As a Clockwork Pro user, I want to see my newly started timer appear in the menu bar within seconds, so that I get immediate feedback that time tracking has begun.

## Acceptance Criteria

- [ ] After `startTimer` succeeds, server fires `clockwork/timers.sync.requested` Inngest event
- [ ] Inngest processes the event and refreshes Redis cache with fresh timer data
- [ ] Tauri client temporarily polls every 2s for ~30s after starting a timer
- [ ] New timer appears in UI within 2-7 seconds of clicking start
- [ ] Polling returns to normal 10s interval after the fast-poll window

## Dependencies

- Existing Inngest `sync-active-timers` function (already handles `clockwork/timers.sync.requested` event)
- `useStartTimer` hook in Tauri client
- `useActiveTimers` hook (React Query polling)
- `/api/timers/start` route

## Out of Scope

- Changing the stop timer flow (already works well with cache invalidation)
- Persistent polling changes
- WebSocket/SSE real-time updates
- Optimistic UI with synthetic timer data

## Technical Notes

- **Server (Approach B):** Fire Inngest event after `startTimer` succeeds in the API route handler
- **Client (Approach C):** Temporary fast polling via `refetchInterval` adjustment in React Query, auto-reset after 30s
- Combined approach yields 2-7 second latency for timer visibility

---

_Generated by Conductor. Review and edit as needed._
